
<title>Customization</title>
<script
src="https://maps.googleapis.com/maps/api/js?key={GOOGLE_MAP_API_KEY}&callback=initMap&v=weekly"
defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.17/interact.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-range/4.0.2/moment-range.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<link rel="stylesheet" type="text/css" href="../assets/style.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<%= javascript_include_tag 'map' %>
<%= javascript_include_tag 'schedule' %>

<script>
  let plan = <%= raw(@customize_plan.schedule_by_day.to_json) %>;
  let allAttractions = <%= raw(@addable_attractions.to_json) %>;
  const location_info = <%= raw(@attraction_location_hash.to_json) %>;
  window.initMap = initMap;

</script>


<h2>Customize Your Traveling Plan:</h2>

<% @customize_plan.schedule_by_day.each_with_index do |one_day_schedule, day| %>
  <div class="one-day-schedule">
    <h2>
      Day <%= day + 1 %>:
    </h2>

    <div class="dropright">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="groups[<%= day %>].onclickAddAttraction(this)" id="add_attraction_<%= day %>">Add Attraction</button>
      <div class="dropdown-menu" id="dropdown_menu_<%= day %>">
      </div>
    </div>

    <div class="row">
      <div class="col-6">
        <div id="schedule">
          <canvas class="schedule-canvas" width="500px" height="810px"></canvas>
        </div>
      </div>

      <div id="map_<%= day %>" class="col-6">
      </div>
    </div>
  </div>
<% end %>

<div class="row">
  <%= link_to 'Back to suggestion', suggestion_path, :class => 'btn btn-primary col-2' %>
</div>
